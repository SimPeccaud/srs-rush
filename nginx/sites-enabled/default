#HTTP
server {
	listen   80 default;
	server_name  www-1;

	access_log  /var/log/nginx/localhost.access.log;

	 location / {
	 	server_tokens off;
		root   /var/www/nginx-default;
		index  whoami.php catalog.php admin.php;
	}

	location /doc {
		root   /usr/share;
		autoindex on;
		allow 127.0.0.1;
		deny all;
	}

	location /images {
		root   /usr/share;
		autoindex on;
	}

	location ~ \.php$ {
    	     root /var/www/nginx-default;
	     fastcgi_pass   127.0.0.1:9000;
	     fastcgi_index  index.php;
	     fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
	     include fastcgi_params;
    	}

	location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
    		 access_log        off;
    		 log_not_found     off;
    		 expires           360d;
	}

	location ~ /\. {
    		 access_log off;
    		 log_not_found off; 
    		 deny all;
	}
}

#HTTPS
server {
    	   listen               443;
    	   ssl                  on;
    	   ssl_certificate      /etc/nginx/crt/server.crt;
    	   ssl_certificate_key  /etc/nginx/crt/server.key;
    	   keepalive_timeout    70;
	   ssl_protocols  SSLv3 TLSv1 TLSv1.1 TLSv1.2;
	   ssl_ciphers  HIGH:SSLv3:MEDIUM;

	 location / {
	 	server_tokens off;
		root   /var/www/nginx-default;
		index  whoami.php catalog.php admin.php;
	}

	location ~ \.php$ {
    	     root /var/www/nginx-default;
	     fastcgi_pass   127.0.0.1:9000;
	     fastcgi_index  index.php;
	     fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
	     include fastcgi_params;
    	}

    	location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
    	     	 access_log        off;
    		 log_not_found     off;
    		 expires           360d;
	}

	location ~ /\. {
    		 access_log off;
    		 log_not_found off; 
    		 deny all;
	}
}
